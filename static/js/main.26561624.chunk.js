(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{11:function(e,t,n){},12:function(e,t,n){e.exports=n(20)},17:function(e,t,n){},18:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(9),s=n.n(a),c=(n(17),n(4)),i=n(5),l=n(7),u=n(6),p=(n(18),n(11),n(2)),d=n(8),f=n(1),g=n.n(f),m=n(3),h=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).transactionList=null,r.tempList=null,r.transactionList=new Map,r.tempList=new Map,r}return Object(i.a)(n,[{key:"getData",value:function(){var e=Object(m.a)(g.a.mark((function e(t,n,r){var o,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.transactionList=new Map,this.tempList=new Map,e.next=4,this.getContractList(t,n);case 4:return o=e.sent,console.log("Get contractlist:"),console.log(o),e.next=9,this.getTransactionFromContractList(o);case 9:console.log("Get transactionlist from contractlist:"),console.log(this.transactionList),this.tempList=this.copyMap(this.transactionList),a=1;case 13:if(!(a<=r)){e.next=19;break}return e.next=16,this.deepSearch();case 16:a++,e.next=13;break;case 19:return e.abrupt("return",this.convertMapToArray(this.transactionList));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getContractList",value:function(){var e=Object(m.a)(g.a.mark((function e(t,n){var r,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="https://blockexplorer.bloxberg.org/api/api?module=contract&action=listcontracts&page="+t+"&offset="+n,e.next=3,fetch(r).then((function(e){return e.json()}));case 3:return o=e.sent,e.abrupt("return",o.result);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getTransactionFromContractList",value:function(){var e=Object(m.a)(g.a.mark((function e(t){var n,r,o,a,s,c,i,l,u,p;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0,r=Object(d.a)(t),e.prev=2,r.s();case 4:if((o=r.n()).done){e.next=40;break}return a=o.value,s="https://blockexplorer.bloxberg.org/api/api?module=account&action=txlist&address=",s+=a.Address,e.next=10,fetch(s).then((function(e){return e.json()}));case 10:c=e.sent,i=Object.keys(c.result).length,l=c.result,u=0;case 14:if(!(u<i)){e.next=34;break}if(""===l[u].from||""===l[u].to||this.transactionList.has(l[u].from+l[u].to)){e.next=31;break}return e.t0=this.transactionList,e.t1=l[u].from+l[u].to,e.t2=l[u].from,e.t3=l[u].to,e.next=22,this.isVerifiedContract(l[u].from);case 22:if(!e.sent){e.next=26;break}e.t4="Contract",e.next=27;break;case 26:e.t4="Account";case 27:e.t5=e.t4,e.t6={source:e.t2,target:e.t3,sourceType:e.t5,targetType:"Contract"},e.t0.set.call(e.t0,e.t1,e.t6),console.log("Entry "+u+" added.");case 31:u++,e.next=14;break;case 34:n++,p=Math.round(100*n/t.length*100)/100,document.getElementById("progress").innerHTML=p+"%",document.getElementById("progress").style.width=p+"%";case 38:e.next=4;break;case 40:e.next=45;break;case 42:e.prev=42,e.t7=e.catch(2),r.e(e.t7);case 45:return e.prev=45,r.f(),e.finish(45);case 48:document.getElementById("progress").style.width="0%",document.getElementById("progress").innerHTML="0%";case 50:case"end":return e.stop()}}),e,this,[[2,42,45,48]])})));return function(t){return e.apply(this,arguments)}}()},{key:"deepSearch",value:function(){var e=Object(m.a)(g.a.mark((function e(){var t,n,r,o,a,s,c,i,l,u,p,f;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.getElementById("loading_informaiton").innerHTML="Starting deep search...",t=this.copyMap(this.tempList),this.tempList=new Map,n=0,r=Object(d.a)(t),e.prev=5,r.s();case 7:if((o=r.n()).done){e.next=79;break}return a=o.value,s="https://blockexplorer.bloxberg.org/api/api?module=account&action=txlist&address=",s+=a[1].source,console.log("Lookup for "+a[1].source),console.log("-----------"),console.log(t),e.next=16,fetch(s).then((function(e){return e.json()}));case 16:c=e.sent,i=Object.keys(c.result).length,l=c.result,u=1,p=0;case 21:if(!(p<i)){e.next=72;break}if(""===l[p].from||""===l[p].to||this.transactionList.has(l[p].from+l[p].to)){e.next=69;break}return e.t0=this.transactionList,e.t1=l[p].from+l[p].to,e.t2=l[p].from,e.t3=l[p].to,e.next=29,this.isVerifiedContract(l[p].from);case 29:if(!e.sent){e.next=33;break}e.t4="Contract",e.next=34;break;case 33:e.t4="Account";case 34:return e.t5=e.t4,e.next=37,this.isVerifiedContract(l[p].to);case 37:if(!e.sent){e.next=41;break}e.t6="Contract",e.next=42;break;case 41:e.t6="Account";case 42:return e.t7=e.t6,e.t8={source:e.t2,target:e.t3,sourceType:e.t5,targetType:e.t7},e.t0.set.call(e.t0,e.t1,e.t8),e.t9=this.tempList,e.t10=l[p].from+l[p].to,e.t11=l[p].from,e.t12=l[p].to,e.next=51,this.isVerifiedContract(l[p].from);case 51:if(!e.sent){e.next=55;break}e.t13="Contract",e.next=56;break;case 55:e.t13="Account";case 56:return e.t14=e.t13,e.next=59,this.isVerifiedContract(l[p].to);case 59:if(!e.sent){e.next=63;break}e.t15="Contract",e.next=64;break;case 63:e.t15="Account";case 64:e.t16=e.t15,e.t17={source:e.t11,target:e.t12,sourceType:e.t14,targetType:e.t16},e.t9.set.call(e.t9,e.t10,e.t17),console.log("Transaction entry "+u+" added."),u++;case 69:p++,e.next=21;break;case 72:u=1,n++,f=Math.round(100*n/t.size*100)/100,document.getElementById("progress").innerHTML=f+"%",document.getElementById("progress").style.width=f+"%";case 77:e.next=7;break;case 79:e.next=84;break;case 81:e.prev=81,e.t18=e.catch(5),r.e(e.t18);case 84:return e.prev=84,r.f(),e.finish(84);case 87:this.tempList=this.copyMap(t),document.getElementById("loading_informaiton").innerHTML="Loading...";case 89:case"end":return e.stop()}}),e,this,[[5,81,84,87]])})));return function(){return e.apply(this,arguments)}}()},{key:"getTransactionsFromAccount",value:function(){var e=Object(m.a)(g.a.mark((function e(t,n){var r,o,a,s,c,i,l,u,p,f,m,h,y,b,v,x,k,E,w,L;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("original tx list"),console.log(t),r=[],o=Object(d.a)(t);try{for(o.s();!(a=o.n()).done;)s=a.value,r.push({source:s.target,target:s.source,type:"Contract"})}catch(g){o.e(g)}finally{o.f()}console.log("Converted tx list"),console.log(r),t=r,console.log("Starting with DEPTH --\x3e  "+n),i=[],c=(c=[]).concat(t),l=1;case 13:if(!(l<=n)){e.next=51;break}console.log("DEPTH --\x3e  "+l),u=[],p=Object(d.a)(t),e.prev=17,p.s();case 19:if((f=p.n()).done){e.next=35;break}return m=f.value,h="https://blockexplorer.bloxberg.org/api/api?module=account&action=txlist&address=",h+=m.target,console.log(m.target),e.next=26,fetch(h).then((function(e){return e.json()}));case 26:for(y=e.sent,b=Object.keys(y.result).length,v=y.result,x=0;x<b;x++){for(0===u.length&&u.push({source:v[x].from,target:v[x].to,type:"Contract"}),k=0,E=0;E<u.length;E++)u[E].source===v[x].from&&u[E].target===v[x].to&&(k=1);0===k&&""!==v[x].to&&(v[x].from!==m.target||u.push({source:v[x].from,target:v[x].to,type:"Contract"}))}for(w=0;w<u.length;w++)i.push({source:u[w].source,target:u[w].target,type:"Contract"});console.log("TEMP-TX-LIST"),console.log(i);case 33:e.next=19;break;case 35:e.next=40;break;case 37:e.prev=37,e.t0=e.catch(17),p.e(e.t0);case 40:return e.prev=40,p.f(),e.finish(40);case 43:for(L=0;L<i.length;L++)c.push({source:i[L].source,target:i[L].target,type:"Contract"});console.log("RESULT-LIST"),console.log(c),t=i,i=[];case 48:l++,e.next=13;break;case 51:return e.abrupt("return",0==n?t:c);case 52:case"end":return e.stop()}}),e,null,[[17,37,40,43]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"isVerifiedContract",value:function(){var e=Object(m.a)(g.a.mark((function e(t){var n,r,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!1,r="https://blockexplorer.bloxberg.org/api/api?module=contract&action=getsourcecode&address="+t,e.next=4,fetch(r).then((function(e){return e.json()}));case 4:return o=e.sent,o.result[0].SourceCode&&(n=!0),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"convertMapToArray",value:function(e){var t=[];return e.forEach((function(e,n){t.push({source:e.source,target:e.target,sourceType:e.sourceType,targetType:e.targetType})})),t}},{key:"copyMap",value:function(e){var t,n=new Map,r=Object(d.a)(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;n.set(o[1].source+o[1].target,{source:o[1].source,target:o[1].target,sourceType:o[1].sourceType,targetType:o[1].targetType})}}catch(a){r.e(a)}finally{r.f()}return n}}]),n}(o.a.Component),y=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).responseObject=null,r.zoomEnable=!0,console.log("Consturctor."),console.log(e),r.responseObject=new h,r}return Object(i.a)(n,[{key:"createGraph",value:function(e){console.log("create graph:");var t=window.innerHeight-document.getElementById("address_information").offsetHeight;document.getElementById("graph_box").style.height=t+"px";var n=t,r=window.innerWidth,o=e;console.log("links"),console.log(o);var a={};o.forEach((function(e){e.source=a[e.source]||(a[e.source]={source:e.source,type:e.sourceType}),e.target=a[e.target]||(a[e.target]={target:e.target,type:e.targetType})})),console.log(a);var s=document.getElementById("address_information").offsetWidth-2,c=n-20,i=p.behavior.zoom().on("zoom",(function(){l.attr("transform","translate("+p.event.translate+") scale("+p.event.scale+")")}));document.getElementById("container").innerHTML="";var l=p.select("#container").append("svg").attr("width",s).attr("height",c).style("cursor","move").call(i).append("g"),u=p.layout.force().size([s,c]).nodes(p.values(a)).links(o).on("tick",(function(e){f.attr("cx",(function(e){return e.x})).attr("cy",(function(e){return e.y})).call(u.drag),d.attr("x1",(function(e){return e.source.x})).attr("y1",(function(e){return e.source.y})).attr("x2",(function(e){return e.target.x})).attr("y2",(function(e){return e.target.y}))})).linkDistance(300).charge((function(e){var t=-200;return 0===e.index&&(t*=2.5),t})).start(),d=l.selectAll(".link").data(o).enter().append("line").attr("class","link"),f=l.selectAll(".node").data(u.nodes()).enter().append("circle").style("cursor","auto").style("fill",(function(e){if("Contract"===e.type)return"orange"})).attr("class","node").attr("r",.005*r).on("click",(function(e){"Contract"===e.type?document.getElementById("address_information").innerHTML=" <p class='labels'>Type:</p><p class='values'>"+e.type+"</p><p class='labels'>Address:</p><p class='values'><a href='https://blockexplorer.bloxberg.org/address/"+e.target+"' target='_blank'>"+e.target+"</a></p>":document.getElementById("address_information").innerHTML=" <p class='labels'>Type:</p><p class='values'>"+e.type+"</p><p class='labels'>Address:</p><p class='values'><a href='https://blockexplorer.bloxberg.org/address/"+e.source+"' target='_blank'>"+e.source+"</a></p>"})).on("mousedown",(function(){console.log(document.getElementsByTagName("g")[0].getAttribute("transform")),this.zoomEnable=!1,console.log("ZoomEnabled? "+this.zoomEnable),p.select("#container").select("svg").call(p.behavior.zoom().on("zoom",null))})).on("mouseup",(function(){this.zoomEnable=!0,console.log("ZoomEnabled? "+this.zoomEnable),p.select("#container").select("svg").call(i)})).on("focus",(function(){p.select(this).style("border-color","red")}));console.log("graph drawed.")}},{key:"showLoader",value:function(){document.getElementById("address_information").innerHTML="Select a node for node information.",document.getElementById("address_information").style.visibility="hidden",document.getElementById("container").style.visibility="hidden",document.getElementById("loader").style.visibility="visible"}},{key:"hideLoader",value:function(){document.getElementById("address_information").style.visibility="visible",document.getElementById("container").style.visibility="visible",document.getElementById("loader").style.visibility="hidden",document.getElementById("progress").style.width="0%",document.getElementById("progress").innerHTML="0%"}},{key:"scrollAnimation",value:function(){document.getElementById("address_information").scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}},{key:"widthResizeListener",value:function(){window.onresize=function(){document.getElementsByTagName("svg")[0].style.width=document.getElementById("address_information").offsetWidth-2}}},{key:"componentWillMount",value:function(){console.log("Component will mount.")}},{key:"componentDidMount",value:function(){var e=this;console.log("Component did mount."),this.showLoader(),this.responseObject.getData(this.props.page,this.props.offset,this.props.depth).then((function(t){e.hideLoader(),e.createGraph(t),e.scrollAnimation(),e.widthResizeListener()}))}},{key:"componentWillUpdate",value:function(e){var t=this;console.log("Component will update."),this.showLoader(),this.responseObject.getData(e.page,e.offset,e.depth).then((function(e){t.hideLoader(),t.createGraph(e),t.scrollAnimation(),t.widthResizeListener()}))}},{key:"componentDidUpdate",value:function(){console.log("Component did update.")}},{key:"render",value:function(){return o.a.createElement("div",{id:"container"})}}]),n}(o.a.Component),b=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={page:0,offset:0,depth:0},e}return Object(i.a)(n,[{key:"render",value:function(){for(var e=this,t=0!==this.state.page?o.a.createElement(y,{page:this.state.page,offset:this.state.offset,depth:this.state.depth}):null,n=[],r=1;r<=100;r++)n.push(o.a.createElement("option",{key:r,value:r},r));for(var a=[],s=1;s<=1800;s++)a.push(o.a.createElement("option",{key:s,value:s},s));for(var c=[],i=0;i<=5;i++)c.push(o.a.createElement("option",{key:i,value:i},i));return o.a.createElement("div",{className:"App"},o.a.createElement("div",{id:"banner"},o.a.createElement("h1",{className:"title"},"Visualisation of Bloxsberg-Network")),o.a.createElement("div",{id:"site_informaiton"},o.a.createElement("p",null,"This website will produce a force directed d3 graph that will visualizise the Bloxberg Network by using the ",o.a.createElement("a",{href:"https://blockexplorer.bloxberg.org/api_docs"},"Bloxberg RPC API"),".")),o.a.createElement("div",{id:"values_informaiton"},o.a.createElement("p",{id:"text"},o.a.createElement("b",null,"Page")," represents the page number to be used for pagination."),o.a.createElement("p",{id:"text"},o.a.createElement("b",null,"Offset")," represents the maximum number of records to return when paginating."),o.a.createElement("p",{id:"text"},o.a.createElement("b",null,"Depth")," represents how deep the http requests will search into to network.")),o.a.createElement("div",{id:"control"},o.a.createElement("label",null,"Page:"),o.a.createElement("select",{id:"page_selection",defaultValue:2},n),o.a.createElement("label",null,"Offset:"),o.a.createElement("select",{id:"offset_selection",defaultValue:1},a),o.a.createElement("label",null,"Depth:"),o.a.createElement("select",{id:"depth_selection",defaultValue:0},c),o.a.createElement("input",{type:"submit",id:"button",value:"Create Graph",onClick:function(){var t=document.getElementById("page_selection").value,n=document.getElementById("offset_selection").value,r=document.getElementById("depth_selection").value;console.log("page -> "+t),console.log("offset -> "+n),console.log("depth -> "+r),e.setState({page:t,offset:n,depth:r})}})),o.a.createElement("div",{id:"loader",style:{visibility:"visable"}},o.a.createElement("div",{id:"progressbar"},o.a.createElement("div",{id:"progress"}),o.a.createElement("p",{id:"loading_informaiton"},"Loading..."))),o.a.createElement("div",{id:"address_information"},o.a.createElement("p",{class:"labels"},"Select a node for node information.")),o.a.createElement("div",{id:"graph_box"},t))}}]),n}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(b,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[12,1,2]]]);
//# sourceMappingURL=main.26561624.chunk.js.map