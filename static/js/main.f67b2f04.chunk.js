(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{118:function(e,t,n){},119:function(e,t,n){},211:function(e,t,n){},222:function(e,t,n){e.exports=n(505)},227:function(e,t,n){},228:function(e,t,n){},241:function(e,t){},250:function(e,t){},268:function(e,t){},270:function(e,t){},287:function(e,t){},288:function(e,t){},352:function(e,t){},354:function(e,t){},363:function(e,t){},365:function(e,t){},390:function(e,t){},392:function(e,t){},393:function(e,t){},399:function(e,t){},401:function(e,t){},414:function(e,t){},426:function(e,t){},429:function(e,t){},434:function(e,t){},445:function(e,t){},448:function(e,t){},505:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(214),s=n.n(o),c=(n(227),n(2)),i=n(4),l=n(9),d=n(8),u=n(80),h=n(15),p=(n(228),n(118),n(119),n(40)),m=n(28),f=n(11),g=n.n(f),b=n(20),v=function(){function e(t,n,a,r){Object(c.a)(this,e),this.address=null,this.name=null,this.type=null,this.status=null,this.transactionMap=null,this.address=t,this.name=n,this.type=a,this.status=r,this.transactionMap=new Map}return Object(i.a)(e,[{key:"getTransactionSummaryMap",value:function(){console.log("    getTransactionSummaryMap:");var e,t=new Map,n=[],a=Object(m.a)(this.transactionMap);try{for(a.s();!(e=a.n()).done;){var r=Object(p.a)(e.value,2),o=(r[0],r[1]);if("undefined"===typeof t.get(o.senderAddress))t.set(o.senderAddress,{senderAddress:o.senderAddress,senderName:o.senderName,receiverAddress:o.receiverAddress,receiverName:o.receiverName,txCount:1});else{var s=t.get(o.senderAddress);t.set(o.senderAddress,{senderAddress:o.senderAddress,senderName:o.senderName,receiverAddress:o.receiverAddress,receiverName:o.receiverName,txCount:s.txCount+1})}}}catch(u){a.e(u)}finally{a.f()}var c,i=Object(m.a)(t);try{for(i.s();!(c=i.n()).done;){var l=Object(p.a)(c.value,2),d=(l[0],l[1]);n.push(d)}}catch(u){i.e(u)}finally{i.f()}return n}},{key:"getTransactionsForAddress",value:function(e){console.log("    getTransactionsForAddress:");var t,n=[],a=Object(m.a)(e);try{for(a.s();!(t=a.n()).done;){var r,o=Object(p.a)(t.value,2),s=o[0],c=(o[1],Object(m.a)(this.transactionMap));try{for(c.s();!(r=c.n()).done;){var i=Object(p.a)(r.value,2),l=(i[0],i[1]);l.senderAddress===s&&n.push(l)}}catch(d){c.e(d)}finally{c.f()}}}catch(d){a.e(d)}finally{a.f()}return n}},{key:"getAllTransactions",value:function(){console.log("    getAllTransactions:");var e,t=[],n=Object(m.a)(this.transactionMap);try{for(n.s();!(e=n.n()).done;){var a=Object(p.a)(e.value,2),r=(a[0],a[1]);t.push(r)}}catch(o){n.e(o)}finally{n.f()}return t}}]),e}(),y=function e(t,n,a,r,o,s,i){Object(c.a)(this,e),this.transactionHash=null,this.senderAddress=null,this.senderName=null,this.senderStatus=null,this.receiverAddress=null,this.receiverName=null,this.receiverStatus=null,this.timeStamp=null,this.input=null,this.transactionHash=t,this.senderAddress=n,this.senderName=a,this.receiverAddress=r,this.receiverName=o,this.timeStamp=s,this.input=i,this.senderStatus=this.senderAddress===this.senderName?"not verified":"verified",this.receiverStatus=this.receiverAddress===this.receiverName?"not verified":"verified"},E=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).Web3Url=null,n.URLTransactionList=null,n.URLTransactionInfo=null,n.addressLookUpMap=null,n.web3Url="https://core.bloxberg.org/",n.URLTransactionList="https://blockexplorer.bloxberg.org/api/api?module=account&action=txlist&address=",n.URLTransactionInfo="https://blockexplorer.bloxberg.org/api/api?module=transaction&action=gettxinfo&txhash=",n.URLContractSourceCode="https://blockexplorer.bloxberg.org/api/api?module=contract&action=getsourcecode&address=",n.addressLookUpMap=new Map,n}return Object(i.a)(a,[{key:"fetchData",value:function(){var e=Object(b.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initAddressManager(t);case 2:return this.addressManager=e.sent,e.next=5,this.saveTransactions(t);case 5:return e.abrupt("return",this.addressManager);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"initAddressManager",value:function(){var e=Object(b.a)(g.a.mark((function e(t){var n,a,r,o,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.next=3,this.isContract(t);case 3:return a=e.sent,e.next=6,this.isVerifiedContract(t);case 6:return r=e.sent,e.next=9,this.getContractName(t);case 9:return o=e.sent,e.next=12,this.getAccountName(t);case 12:return s=e.sent,console.log("isContract: "+a),console.log("isVerified: "+r),console.log("contractName: "+o),console.log("accountName: "+s),console.log("address: "+t),!0===a?(n=new v(t,null==o?t:o,"Contract",r?"verified":"not verified"),this.addressLookUpMap.set(t,o)):(n=new v(t,null==s?t:s,"Account",null==s?"not verified":"verified by validator"),this.addressLookUpMap.set(t,s)),e.abrupt("return",n);case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTransactions",value:function(){var e=Object(b.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.URLTransactionList+t).then((function(e){return e.json()}));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTransactionInfo",value:function(){var e=Object(b.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.URLTransactionInfo+t).then((function(e){return e.json()}));case 2:return n=e.sent,console.log(n),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"lookUpName",value:function(){var e=Object(b.a)(g.a.mark((function e(t){var n,a,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==typeof(n=this.addressLookUpMap.get(t))){e.next=18;break}return e.next=4,this.isContract(t);case 4:if(!e.sent){e.next=13;break}return e.next=8,this.getContractName(t);case 8:a=e.sent,n=null!==a?a:t,this.addressLookUpMap.set(t,n),e.next=18;break;case 13:return e.next=15,this.getAccountName(t);case 15:r=e.sent,n=null!==r?r:t,this.addressLookUpMap.set(t,n);case 18:return e.abrupt("return",n);case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveTransactions",value:function(){var e=Object(b.a)(g.a.mark((function e(t){var n,a,r,o,s,c,i,l,d,u,h,p;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getTransactions(t);case 2:n=e.sent,a=Object.keys(n.result).length,r=n.result,o=0;case 6:if(!(o<a)){e.next=26;break}return s=r[o].hash,c=r[o].from,e.next=11,this.lookUpName(c);case 11:return i=e.sent,l=r[o].to,e.next=15,this.lookUpName(l);case 15:d=e.sent,u=this.convertTime(parseInt(r[o].timeStamp)),h=r[o].input,this.addressManager.transactionMap.set(o,new y(s,c,i,l,d,u,h)),p=Math.round(100*(o+1)/a*100)/100,document.getElementById("p").innerHTML=p+"%",document.getElementById("p").style.width=p+"%",document.getElementById("loader_info").innerHTML="Receiving transaction ("+(o+1)+"/"+a+")";case 23:o++,e.next=6;break;case 26:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isContract",value:function(){var e=Object(b.a)(g.a.mark((function e(t){var a,r,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=!0,""!==t){e.next=5;break}a=!1,e.next=11;break;case 5:return r=n(120),o=new r(new r.providers.HttpProvider(this.web3Url)),e.next=9,o.eth.getCode(t);case 9:"0x"===e.sent&&(a=!1);case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isVerifiedContract",value:function(){var e=Object(b.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!0,e.next=3,fetch(this.URLContractSourceCode+t).then((function(e){return e.json()}));case 3:return"undefined"===typeof e.sent.result[0].ContractName&&(n=!1),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getContractName",value:function(){var e=Object(b.a)(g.a.mark((function e(t){var n,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.URLContractSourceCode+t).then((function(e){return e.json()}));case 2:return n=e.sent,a=n.result[0].ContractName,e.abrupt("return","undefined"!==typeof a?a:null);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAccountName",value:function(){var e=Object(b.a)(g.a.mark((function e(t){var n,a,r,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://blockexplorer.bloxberg.org/address/"+t+"/transactions");case 2:return n=e.sent,e.next=5,n.text();case 5:return a=e.sent,'<strong class="mr-4 mb-2 text-dark" title="[a-zA-Z0-9. ]*">',r=a.match('<strong class="mr-4 mb-2 text-dark" title="[a-zA-Z0-9. ]*">'),o=null,null!==r&&(o=r[0].substring(43,r[0].length-2)),e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"convertTime",value:function(e){var t=new Date(1e3*e);return(t.getDate()<10?"0"+t.getDate():t.getDate())+"."+(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"."+t.getFullYear()+", "+(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":"+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())}}]),a}(r.a.Component),k=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).url_website="https://internet-sicherheit.github.io/visualisation_of_bloxberg_network/#/visualisation_of_bloxberg_network/AddressViewer?address=",a.url_bloxberg_tx="https://blockexplorer.bloxberg.org/tx/",a.url_bloxberg_addr="https://blockexplorer.bloxberg.org/address/",a.MODE_SUMMARY="mode_transaction_summary",a.MODE_ALLTRANSACTIONS="mode_all_transactions",a.MODE_SELECTEDTRANSACTIONS="mode_selected_transactions",a.PAGE_FIRST="page_first",a.PAGE_LAST="page_last",a.PAGE_INCREASE="page_increase",a.PAGE_DECREASE="page_decrease",a.htmlCode="",a.responseObject=null,a.promise=null,a.transactionList=null,a.mode=null,a.page=1,a.pageFaktor=100,a.checkedAddresses=null,console.log("Consturctor:"),console.log(e),a.responseObject=new E,a.checkedAddresses=new Map,a}return Object(i.a)(n,[{key:"renderData",value:function(e){this.promise=e,document.getElementById("type").innerHTML=this.promise.type,document.getElementById("name").innerHTML='<a href="'+this.url_bloxberg_addr+this.promise.address+'/transactions" target="_blank">'+this.promise.name+"</a>",document.getElementById("status").innerHTML=this.promise.status,this.renderTableSummary(1)}},{key:"getMaxPages",value:function(){var e=1;0!==this.transactionList.length&&(e=this.transactionList.length%this.pageFaktor!==0?Math.floor(this.transactionList.length/this.pageFaktor)+1:Math.floor(this.transactionList.length/this.pageFaktor));return e}},{key:"getRowCounterStart",value:function(e){return 1===e?0:(e-1)*this.pageFaktor}},{key:"getRowCounterEnd",value:function(e){return e===this.getMaxPages()?this.transactionList.length:e*this.pageFaktor}},{key:"renderTable",value:function(e){var t=this.getMaxPages();switch(e){case this.PAGE_INCREASE:this.page<t&&this.page++;break;case this.PAGE_DECREASE:this.page>1&&this.page--;break;case this.PAGE_FIRST:this.page=1;break;case this.PAGE_LAST:this.page=t}switch(this.mode){case this.MODE_SUMMARY:this.renderTableSummary(this.page);break;case this.MODE_ALLTRANSACTIONS:this.renderTableAllTransactions(this.page);break;case this.MODE_SELECTEDTRANSACTIONS:this.renderTableSelectedTransactions(this.page,!1)}}},{key:"testTableSummary",value:function(){for(var e=[],t=0;t<571;t++)e.push({senderAddress:"SenderAddress"+t,senderName:"SenderName"+t,receiverAddress:"ReceiverAddress"+t,receiverName:"ReceiverName"+t,txCount:"TxCount"+t});return e}},{key:"renderTableSummary",value:function(e,t){console.log("Transaction Summary --\x3e"),this.transactionList=this.promise.getTransactionSummaryMap(),this.mode=this.MODE_SUMMARY,this.page=1===e?this.page=1:e,this.setPageButtons(),this.htmlCode="",this.checkedAddresses=t?new Map:this.checkedAddresses,this.addToHTMLCode('<table class="table" style="table-layout:fixed; word-wrap:break-word;"><thead class="thead-dark"><tr>'),this.addToHTMLCode('<th scope="col">#</th>'),this.addToHTMLCode('<th scope="col">Sender</th>'),this.addToHTMLCode('<th scope="col">Receiver</th>'),this.addToHTMLCode('<th scope="col">TxCount</th>'),this.addToHTMLCode("</tr></thead><tbody>");var n=this.getRowCounterEnd(e),a=this.getRowCounterStart(e);for(console.log("        MaxPages: "+this.getMaxPages()),console.log("        Page: "+e),console.log("        Start: "+a),console.log("        End: "+n);a<n;a++){var r=this.transactionList[a],o="undefined"===typeof this.checkedAddresses.get(r.senderAddress)?"":"checked";this.addToHTMLCode('<tr id="'+r.senderAddress+'"><th scope="row"><input class="checkBox" type="checkbox" value="'+r.senderAddress+'" '+o+' /></th><td><a href="'+this.url_website+r.senderAddress+'" target="_blank">'+r.senderName+'</a></td><td><a href="'+this.url_website+r.receiverAddress+'" target="_blank">'+r.receiverName+"</a></td><td>"+r.txCount+"</td></tr>")}this.addToHTMLCode("</tbody></table>"),document.getElementById("table").innerHTML=this.htmlCode;var s,c=Object(m.a)(this.checkedAddresses);try{for(c.s();!(s=c.n()).done;){var i=Object(p.a)(s.value,2),l=(i[0],i[1]),d=document.getElementById(l);null!==d&&(d.style.backgroundColor="lightgray")}}catch(u){c.e(u)}finally{c.f()}this.addListenerToCheckBoxes()}},{key:"renderTableAllTransactions",value:function(e){console.log("AllTransactions --\x3e"),this.transactionList=this.promise.getAllTransactions(),this.mode=this.MODE_ALLTRANSACTIONS,this.page=1===e?this.page=1:e,this.setPageButtons(),this.htmlCode="",this.checkedAddresses=new Map,this.addToHTMLCode('<table class="table" style="table-layout:fixed; word-wrap:break-word;"><thead class="thead-dark"><tr>'),this.addToHTMLCode('<th scope="col">#</th>'),this.addToHTMLCode('<th scope="col">Sender</th>'),this.addToHTMLCode('<th scope="col">Receiver</th>'),this.addToHTMLCode('<th scope="col">TimeStamp</th>'),this.addToHTMLCode('<th scope="col">Input</th>'),this.addToHTMLCode("</tr></thead><tbody>");var t=this.getRowCounterEnd(e),n=this.getRowCounterStart(e);for(console.log("        MaxPages: "+this.getMaxPages()),console.log("        Page: "+e),console.log("        Start: "+n),console.log("        End: "+t);n<t;n++){var a=this.transactionList[n];this.addToHTMLCode('<tr><th scope="row">'+n+'</th><td><a href="'+this.url_website+a.senderAddress+'" target="_blank">'+a.senderName+'</a></td><td><a href="'+this.url_website+a.receiverAddress+'" target="_blank">'+a.receiverName+'</a></td><td><a href="'+this.url_bloxberg_tx+a.transactionHash+'/internal_transactions" target="_blank">'+a.timeStamp+"</a></td><td>"+a.input+"</td></tr>")}this.addToHTMLCode("</tbody></table>"),document.getElementById("table").innerHTML=this.htmlCode}},{key:"renderTableSelectedTransactions",value:function(e){console.log("SelectedTransactions --\x3e"),this.transactionList=this.promise.getTransactionsForAddress(this.checkedAddresses),this.mode=this.MODE_SELECTEDTRANSACTIONS,this.page=1===e?this.page=1:e,this.setPageButtons(),this.htmlCode="",this.addToHTMLCode('<table class="table" style="table-layout:fixed; word-wrap:break-word;"><thead class="thead-dark"><tr>'),this.addToHTMLCode('<th scope="col">#</th>'),this.addToHTMLCode('<th scope="col">Sender</th>'),this.addToHTMLCode('<th scope="col">Receiver</th>'),this.addToHTMLCode('<th scope="col">TimeStamp</th>'),this.addToHTMLCode('<th scope="col">Input</th>'),this.addToHTMLCode("</tr></thead><tbody>");var t=this.getRowCounterEnd(e),n=this.getRowCounterStart(e);if(console.log("        MaxPages: "+this.getMaxPages()),console.log("        Page: "+e),console.log("        Start: "+n),console.log("        End: "+t),"undefined"===typeof this.checkedAddresses.length)for(;n<t;n++){var a=this.transactionList[n];this.addToHTMLCode('<tr><th scope="row">'+n+'</th><td><a href="'+this.url_website+a.senderAddress+'" target="_blank">'+a.senderName+'</a></td><td><a href="'+this.url_website+a.receiverAddress+'" target="_blank">'+a.receiverName+'</a></td><td><a href="'+this.url_bloxberg_tx+a.transactionHash+'/internal_transactions" target="_blank">'+a.timeStamp+"</a></td><td>"+a.input+"</td></tr>")}this.addToHTMLCode("</tbody></table>"),document.getElementById("table").innerHTML=this.htmlCode}},{key:"addToHTMLCode",value:function(e){this.htmlCode=this.htmlCode+e}},{key:"setPageButtons",value:function(){for(var e=document.getElementsByClassName("pageButton"),t=0;t<e.length;t++)e[t].innerHTML="Page "+this.page}},{key:"addListenerToCheckBoxes",value:function(){for(var e=this,t=document.getElementsByClassName("checkBox"),n=0;n<t.length;n++)t[n].addEventListener("change",(function(t){t.currentTarget.checked?(e.checkedAddresses.set(t.currentTarget.value,t.currentTarget.value),document.getElementById(t.currentTarget.value).style.backgroundColor="lightgray"):(e.checkedAddresses.delete(t.currentTarget.value),document.getElementById(t.currentTarget.value).style.backgroundColor="white")}))}},{key:"scrollAnimation",value:function(){document.getElementById("table_window").scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}},{key:"showInformation",value:function(e){if(!0===e)for(var t=document.getElementsByClassName("info"),n=0;n<t.length;n++)t[n].style.display="table-row";else for(var a=document.getElementsByClassName("info"),r=0;r<a.length;r++)a[r].style.display="none"}},{key:"showLoader",value:function(e){!0===e?document.getElementById("loader_window").style.display="block":(document.getElementById("loader_window").style.display="none",document.getElementById("p").style.width="0%",document.getElementById("p").innerHTML="0.0%",document.getElementById("loader_info").innerHTML="")}},{key:"showTable",value:function(e){document.getElementById("table_window").style.display=!0===e?"block":"none"}},{key:"componentDidMount",value:function(){var e=this;this.showInformation(!1),this.showLoader(!0),this.showTable(!1),this.promise=this.responseObject.fetchData(this.props.address),this.promise.then((function(t){e.showLoader(!1),e.showInformation(!0),e.showTable(!0),e.renderData(t),e.scrollAnimation()}))}},{key:"componentWillUpdate",value:function(e){var t=this;this.showInformation(!1),this.showLoader(!0),this.showTable(!1),this.promsie=this.responseObject.fetchData(e.address),this.promise.then((function(e){t.showLoader(!1),t.showInformation(!0),t.showTable(!0),t.renderData(e),t.scrollAnimation()}))}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{class:"TableCreator"},r.a.createElement("div",{id:"links"},r.a.createElement("button",{class:"btn btn-outline-secondary",type:"button",id:"button-addon2",onClick:function(){return e.renderTableSummary(1,!0)}},"Summary"),r.a.createElement("button",{class:"btn btn-outline-secondary",type:"button",id:"button-addon2",onClick:function(){return e.renderTableAllTransactions(1)}},"All transactions"),r.a.createElement("button",{class:"btn btn-outline-secondary",type:"button",id:"button-addon2",onClick:function(){return e.renderTableSelectedTransactions(1)}},"Selected transactions")),r.a.createElement("table",{class:"page_control"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("button",{class:"btn btn-outline-secondary",type:"button",id:"button-addon2",onClick:function(){return e.renderTable(e.PAGE_FIRST)}},"First"),r.a.createElement("button",{class:"btn btn-outline-secondary",type:"button",id:"button-addon2",onClick:function(){return e.renderTable(e.PAGE_DECREASE)}},"<"),r.a.createElement("button",{class:"btn btn-outline-secondary pageButton",type:"button",id:"button-addon2"},"Page 1"),r.a.createElement("button",{class:"btn btn-outline-secondary",type:"button",id:"button-addon2",onClick:function(){return e.renderTable(e.PAGE_INCREASE)}},">"),r.a.createElement("button",{class:"btn btn-outline-secondary",type:"button",id:"button-addon2",onClick:function(){return e.renderTable(e.PAGE_LAST)}},"Last"))))),r.a.createElement("div",{id:"table"}),r.a.createElement("table",{class:"page_control"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("button",{class:"btn btn-outline-secondary",type:"button",id:"button-addon2",onClick:function(){return e.renderTable(e.PAGE_FIRST)}},"First"),r.a.createElement("button",{class:"btn btn-outline-secondary",type:"button",id:"button-addon2",onClick:function(){return e.renderTable(e.PAGE_DECREASE)}},"<"),r.a.createElement("button",{class:"btn btn-outline-secondary pageButton",type:"button",id:"button-addon2"},"Page 1"),r.a.createElement("button",{class:"btn btn-outline-secondary",type:"button",id:"button-addon2",onClick:function(){return e.renderTable(e.PAGE_INCREASE)}},">"),r.a.createElement("button",{class:"btn btn-outline-secondary",type:"button",id:"button-addon2",onClick:function(){return e.renderTable(e.PAGE_LAST)}},"Last"))))))}}]),n}(a.Component),T=n(218),w=n.n(T),x=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={address:null},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.location.search;if(console.log(e),""!==e){var t=w.a.parse(this.props.location.search).address;t.match("^0x[a-fA-F0-9]{40}$")&&(this.setState({address:t}),document.getElementById("address_input").value=t)}}},{key:"render",value:function(){var e=this,t=null!==this.state.address?r.a.createElement(k,{address:this.state.address}):null;return r.a.createElement("div",{className:"AddressViewer"},r.a.createElement("div",{class:"window",id:"search_window"},r.a.createElement("table",{id:"search_table"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("label",{class:"black_label"},"Address")),r.a.createElement("td",null,r.a.createElement("div",{class:"input-group-append"},r.a.createElement("input",{type:"text",id:"address_input",class:"form-control form-control-lg",placeholder:"Enter address...",autoFocus:!0}),r.a.createElement("button",{class:"btn btn-outline-secondary",type:"button",id:"button-addon2",onClick:function(){var t=document.getElementById("address_input").value;""!==t?t.match("^0x[a-fA-F0-9]{40}$")?(console.log("address -> "+t),e.setState({address:t})):window.alert("Invalid address."):window.alert("Inputfield is empty.")}},"Search")))),r.a.createElement("tr",{class:"info"},r.a.createElement("td",null,r.a.createElement("label",{class:"black_label"},"Type")),r.a.createElement("td",null,r.a.createElement("label",{id:"type"}))),r.a.createElement("tr",{class:"info"},r.a.createElement("td",null,r.a.createElement("label",{class:"black_label"},"Name")),r.a.createElement("td",null,r.a.createElement("label",{id:"name"}))),r.a.createElement("tr",{class:"info"},r.a.createElement("td",null,r.a.createElement("label",{class:"black_label"},"Status")),r.a.createElement("td",null,r.a.createElement("label",{id:"status"})))))),r.a.createElement("div",{class:"window",id:"loader_window"},r.a.createElement("div",{id:"pb"},r.a.createElement("div",{id:"p"},"0.0%")),r.a.createElement("label",{id:"loader_info"})),r.a.createElement("div",{class:"window",id:"table_window"},t))}}]),n}(a.Component),A=(n(211),n(30)),C=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).transactionMap=null,n.tempMap=null,n.transactionMap=new Map,n.tempMap=new Map,n}return Object(i.a)(a,[{key:"getData",value:function(){var e=Object(b.a)(g.a.mark((function e(t,n,a){var r,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setLoadingbar(0),this.transactionMap=new Map,this.tempMap=new Map,console.log("Function - getContractList(page, offsett):"),e.next=6,this.getContractList(t,n);case 6:return r=e.sent,console.log("CONTRACTLIST:"),console.log(r),console.log("Function - getTransactionFromContractList(contractList):"),e.next=12,this.getTransactionFromContractList(r);case 12:return console.log("TRANSACTIONMAP BEFORE DEEEP SEARCH:"),console.log(this.transactionMap),console.log("Function - deepSearch(depth, round):"),e.next=17,this.copyMap(this.transactionMap);case 17:if(this.tempMap=e.sent,0===a){e.next=28;break}o=1;case 20:if(!(o<=a)){e.next=26;break}return e.next=23,this.deepSearch(a,o);case 23:o++,e.next=20;break;case 26:console.log("TRANSACTIONMAP AFTER DEEEP SEARCH:"),console.log(this.transactionMap);case 28:return document.getElementById("loading_informaiton").innerHTML="Loading...",e.abrupt("return",this.convertMapToArray(this.transactionMap));case 30:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"getContractList",value:function(){var e=Object(b.a)(g.a.mark((function e(t,n){var a,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="https://blockexplorer.bloxberg.org/api/api?module=contract&action=listcontracts&page="+t+"&offset="+n,e.next=3,fetch(a).then((function(e){return e.json()}));case 3:return r=e.sent,e.abrupt("return",r.result);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getTransactionFromContractList",value:function(){var e=Object(b.a)(g.a.mark((function e(t){var n,a,r,o,s,c,i,l,d,u;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Searching for contract transactions:"),n=1,a=Object(m.a)(t),e.prev=3,a.s();case 5:if((r=a.n()).done){e.next=41;break}return o=r.value,s="https://blockexplorer.bloxberg.org/api/api?module=account&action=txlist&address=",s+=o.Address,e.next=11,fetch(s).then((function(e){return e.json()}));case 11:c=e.sent,i=Object.keys(c.result).length,l=c.result,console.log("   Recived "+i+" Transaction entries."),d=0;case 16:if(!(d<i)){e.next=36;break}if(""===l[d].from||""===l[d].to||this.mapContains(this.transactionMap,l[d].from,l[d].to)){e.next=33;break}return e.t0=this.transactionMap,e.t1=l[d].from+l[d].to,e.t2=l[d].from,e.t3=l[d].to,e.next=24,this.isContract(l[d].from);case 24:if(!e.sent){e.next=28;break}e.t4="Contract",e.next=29;break;case 28:e.t4="Account";case 29:e.t5=e.t4,e.t6={source:e.t2,target:e.t3,sourceType:e.t5,targetType:"Contract"},e.t0.set.call(e.t0,e.t1,e.t6),console.log("      Transaction entry number "+(d+1)+" added.");case 33:d++,e.next=16;break;case 36:u=Math.round(100*n/t.length*100)/100,this.setLoadingbar(u),n++;case 39:e.next=5;break;case 41:e.next=46;break;case 43:e.prev=43,e.t7=e.catch(3),a.e(e.t7);case 46:return e.prev=46,a.f(),e.finish(46);case 49:this.setLoadingbar(0);case 50:case"end":return e.stop()}}),e,this,[[3,43,46,49]])})));return function(t){return e.apply(this,arguments)}}()},{key:"deepSearch",value:function(){var e=Object(b.a)(g.a.mark((function e(t,n){var a,r,o,s,c,i,l,d,u,h,p,f,b;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=this.copyMap(this.tempMap),this.tempMap=new Map,r=1,console.log("DEEP SEARCH ROUND "+n+"/"+t),o=Object(m.a)(a),e.prev=5,o.s();case 7:if((s=o.n()).done){e.next=81;break}return c=s.value,console.log("   Look up for map entry "+r+" of "+a.size),document.getElementById("loading_informaiton").innerHTML="Address look up ("+r+"/"+a.size+")<br>Depth search level ("+n+"/"+t+")",i="https://blockexplorer.bloxberg.org/api/api?module=account&action=txlist&address=",i+=c[1].source,console.log("      Searching transactions for address "+c[1].source+" ..."),e.next=16,fetch(i).then((function(e){return e.json()}));case 16:l=e.sent,d=Object.keys(l.result).length,u=l.result,console.log("         Recived "+d+" Transaction entries."),h=1,p=0;case 22:if(!(p<d)){e.next=76;break}if(u[p].to!==c[1].source&&(f=u[p].from,u[p].from=u[p].to,u[p].to=f),""===u[p].from||""===u[p].to||this.mapContains(this.transactionMap,u[p].from,u[p].to)){e.next=72;break}return e.t0=this.transactionMap,e.t1=u[p].from+u[p].to,e.t2=u[p].from,e.t3=u[p].to,e.next=31,this.isContract(u[p].from);case 31:if(!e.sent){e.next=35;break}e.t4="Contract",e.next=36;break;case 35:e.t4="Account";case 36:return e.t5=e.t4,e.next=39,this.isContract(u[p].to);case 39:if(!e.sent){e.next=43;break}e.t6="Contract",e.next=44;break;case 43:e.t6="Account";case 44:return e.t7=e.t6,e.t8={source:e.t2,target:e.t3,sourceType:e.t5,targetType:e.t7},e.t0.set.call(e.t0,e.t1,e.t8),e.t9=this.tempMap,e.t10=u[p].from+u[p].to,e.t11=u[p].from,e.t12=u[p].to,e.next=53,this.isContract(u[p].from);case 53:if(!e.sent){e.next=57;break}e.t13="Contract",e.next=58;break;case 57:e.t13="Account";case 58:return e.t14=e.t13,e.next=61,this.isContract(u[p].to);case 61:if(!e.sent){e.next=65;break}e.t15="Contract",e.next=66;break;case 65:e.t15="Account";case 66:e.t16=e.t15,e.t17={source:e.t11,target:e.t12,sourceType:e.t14,targetType:e.t16},e.t9.set.call(e.t9,e.t10,e.t17),console.log("            Transaction entry number "+h+" added."),b=Math.round(100*h/d*100)/100,this.setLoadingbar(b);case 72:h++;case 73:p++,e.next=22;break;case 76:h=1,r++,this.setLoadingbar(0);case 79:e.next=7;break;case 81:e.next=86;break;case 83:e.prev=83,e.t18=e.catch(5),o.e(e.t18);case 86:return e.prev=86,o.f(),e.finish(86);case 89:console.log("----- MAP for round "+n+" -----"),console.log(a),console.log("---------------------------");case 92:case"end":return e.stop()}}),e,this,[[5,83,86,89]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"isContract",value:function(){var e=Object(b.a)(g.a.mark((function e(t){var a,r,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!0,r=n(120),o=new r(new r.providers.HttpProvider("https://core.bloxberg.org/")),e.next=5,o.eth.getCode(t);case 5:return"0x"===e.sent&&(a=!1),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"convertMapToArray",value:function(e){var t=[];return e.forEach((function(e,n){t.push({source:e.source,target:e.target,sourceType:e.sourceType,targetType:e.targetType})})),t}},{key:"copyMap",value:function(e){var t,n=new Map,a=Object(m.a)(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;n.set(r[1].source+r[1].target,{source:r[1].source,target:r[1].target,sourceType:r[1].sourceType,targetType:r[1].targetType})}}catch(o){a.e(o)}finally{a.f()}return n}},{key:"mapContains",value:function(e,t,n){return e.has(t+n)||e.has(n+t)}},{key:"setLoadingbar",value:function(e){document.getElementById("progress").style.width=e+"%",document.getElementById("progress").innerHTML=e+"%"}}]),a}(r.a.Component),M=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).responseObject=null,a.zoomEnable=!0,console.log("Consturctor:"),console.log(e),a.responseObject=new C,a}return Object(i.a)(n,[{key:"createGraph",value:function(e){console.log("Function - createGraph():");var t=window.innerHeight-document.getElementById("address_information").offsetHeight;document.getElementById("graph_box").style.height=t+"px";var n=t,a=window.innerWidth;console.log("PROMISE:"),console.log(e);var r=e;console.log("LINKS:"),console.log(r);var o={};r.forEach((function(e){e.source=o[e.source]||(o[e.source]={nodeAddress:e.source,source:e.source,target:e.target,typeSource:e.sourceType,typeTarget:e.targetType}),e.target=o[e.target]||(o[e.target]={nodeAddress:e.target,source:e.source,target:e.target,typeSource:e.sourceType,typeTarget:e.targetType})})),console.log("NODES:"),console.log(o);var s=document.getElementById("address_information").offsetWidth-2,c=n-20,i=A.behavior.zoom().on("zoom",(function(){l.attr("transform","translate("+A.event.translate+") scale("+A.event.scale+")")}));document.getElementById("container").innerHTML="";var l=A.select("#container").append("svg").attr("width",s).attr("height",c).style("cursor","move").call(i).append("g"),d=A.layout.force().size([s,c]).nodes(A.values(o)).links(r).on("tick",(function(e){h.attr("cx",(function(e){return e.x})).attr("cy",(function(e){return e.y})).call(d.drag),u.attr("x1",(function(e){return e.source.x})).attr("y1",(function(e){return e.source.y})).attr("x2",(function(e){return e.target.x})).attr("y2",(function(e){return e.target.y}))})).linkDistance(300).charge((function(e){var t=-200;return 0===e.index&&(t*=2.5),t})).start(),u=l.selectAll(".link").data(r).enter().append("line").attr("class","link"),h=l.selectAll(".node").data(d.nodes()).enter().append("circle").style("cursor","auto").style("fill",(function(e){return e.nodeAddress===e.source&&"Contract"===e.typeSource||e.nodeAddress===e.target&&"Contract"===e.typeTarget?"orange":void 0})).attr("class","node").attr("r",.005*a).on("click",(function(e){console.log(e),e.nodeAddress===e.source&&(document.getElementById("address_information").innerHTML=" <p class='labels'>Type:</p><p class='values'>"+e.typeSource+"</p><p class='labels'>Address:</p><p class='values'><a href='https://blockexplorer.bloxberg.org/address/"+e.source+"' target='_blank'>"+e.source+"</a></p>"),e.nodeAddress===e.target&&(document.getElementById("address_information").innerHTML=" <p class='labels'>Type:</p><p class='values'>"+e.typeTarget+"</p><p class='labels'>Address:</p><p class='values'><a href='https://blockexplorer.bloxberg.org/address/"+e.target+"' target='_blank'>"+e.target+"</a></p>")})).on("mousedown",(function(e){console.log("----- Node Information -----"),console.log("nodeAddress: "+e.nodeAddress),console.log("source: "+e.source),console.log("target: "+e.target),console.log("typeSource:   "+e.typeSource),console.log("typeTarget:   "+e.typeTarget),this.zoomEnable=!1,A.select("#container").select("svg").call(A.behavior.zoom().on("zoom",null))})).on("mouseup",(function(){this.zoomEnable=!0,A.select("#container").select("svg").call(i)})).on("focus",(function(){A.select(this).style("border-color","red")}));console.log("Graph drawed.")}},{key:"timeStap",value:function(){return Math.floor(Date.now())}},{key:"calculationTime",value:function(e,t){console.log("Graph created in "+(t-e)/1e3+" seconds.")}},{key:"showLoader",value:function(){document.getElementById("address_information").innerHTML="Select a node for node information.",document.getElementById("address_information").style.visibility="hidden",document.getElementById("container").style.visibility="hidden",document.getElementById("loader").style.visibility="visible"}},{key:"hideLoader",value:function(){document.getElementById("address_information").style.visibility="visible",document.getElementById("container").style.visibility="visible",document.getElementById("loader").style.visibility="hidden",document.getElementById("progress").style.width="0%",document.getElementById("progress").innerHTML="0%"}},{key:"scrollAnimation",value:function(){document.getElementById("address_information").scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}},{key:"widthResizeListener",value:function(){window.onresize=function(){document.getElementsByTagName("svg")[0].style.width=document.getElementById("address_information").offsetWidth-2}}},{key:"componentWillMount",value:function(){console.log("Component will mount.")}},{key:"componentDidMount",value:function(){var e=this;console.log("Component did mount.");var t=this.timeStap();this.showLoader(),this.responseObject.getData(this.props.page,this.props.offset,this.props.depth).then((function(n){e.hideLoader(),e.createGraph(n);var a=e.timeStap();e.calculationTime(t,a),e.scrollAnimation(),e.widthResizeListener()}))}},{key:"componentWillUpdate",value:function(e){var t=this;console.log("Component will update.");var n=this.timeStap();this.showLoader(),this.responseObject.getData(e.page,e.offset,e.depth).then((function(e){t.hideLoader(),t.createGraph(e);var a=t.timeStap();t.calculationTime(n,a),t.scrollAnimation(),t.widthResizeListener()}))}},{key:"componentDidUpdate",value:function(){console.log("Component did update.")}},{key:"render",value:function(){return r.a.createElement("div",{id:"container"})}}]),n}(a.Component),L=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={page:0,offset:0,depth:0},e}return Object(i.a)(n,[{key:"render",value:function(){for(var e=this,t=0!==this.state.page?r.a.createElement(M,{page:this.state.page,offset:this.state.offset,depth:this.state.depth}):null,n=[],a=1;a<=100;a++)n.push(r.a.createElement("option",{key:a,value:a},a));for(var o=[],s=1;s<=1800;s++)o.push(r.a.createElement("option",{key:s,value:s},s));for(var c=[],i=0;i<=5;i++)c.push(r.a.createElement("option",{key:i,value:i},i));return r.a.createElement("div",{className:"VBN"},r.a.createElement("div",{id:"banner"},r.a.createElement("h1",{className:"title"},"Visualisation of Bloxberg-Network")),r.a.createElement("div",{id:"site_informaiton"},r.a.createElement("p",null,"This website will produce a force directed d3 graph, that will visualizise the Bloxberg Network",r.a.createElement("br",null),"by using the ",r.a.createElement("a",{href:"https://blockexplorer.bloxberg.org/api_docs",target:"_blank",rel:"noopener noreferrer"},"Bloxberg RPC API")," and the ",r.a.createElement("a",{href:"https://web3js.readthedocs.io/en/v1.3.0/",target:"_blank",rel:"noopener noreferrer"},"Web3")," framework for JavaScript.")),r.a.createElement("div",{id:"values_informaiton"},r.a.createElement("p",{id:"text"},r.a.createElement("b",null,"Page")," represents the page number to be used for pagination."),r.a.createElement("p",{id:"text"},r.a.createElement("b",null,"Offset")," represents the maximum number of records to return when paginating."),r.a.createElement("p",{id:"text"},r.a.createElement("b",null,"Depth")," represents how deep the http requests will search into to network.")),r.a.createElement("div",{id:"control"},r.a.createElement("label",null,"Page:"),r.a.createElement("select",{id:"page_selection",defaultValue:2},n),r.a.createElement("label",null,"Offset:"),r.a.createElement("select",{id:"offset_selection",defaultValue:1},o),r.a.createElement("label",null,"Depth:"),r.a.createElement("select",{id:"depth_selection",defaultValue:0},c),r.a.createElement("input",{type:"submit",id:"button",value:"Create Graph",onClick:function(){var t=document.getElementById("page_selection").value,n=document.getElementById("offset_selection").value,a=document.getElementById("depth_selection").value;console.log("page -> "+t),console.log("offset -> "+n),console.log("depth -> "+a),e.setState({page:t,offset:n,depth:a})}})),r.a.createElement("div",{id:"loader",style:{visibility:"visable"}},r.a.createElement("div",{id:"progressbar"},r.a.createElement("div",{id:"progress"}),r.a.createElement("p",{id:"loading_informaiton"},"Loading..."))),r.a.createElement("div",{id:"address_information"},r.a.createElement("p",{class:"labels"},"Select a node for node information.")),r.a.createElement("div",{id:"graph_box"},t))}}]),n}(a.Component),_=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement(u.a,{basename:"/visualisation_of_bloxberg_network/"},r.a.createElement("div",{className:"App"},r.a.createElement("div",{id:"navigation"},r.a.createElement("ul",{id:"nav-links"},r.a.createElement(u.b,{to:"/AddressViewer",className:"link"},r.a.createElement("li",null,"AddressViewer")),r.a.createElement(u.b,{to:"/VBN",className:"link"},r.a.createElement("li",null,"VBN")))),r.a.createElement(h.c,null,r.a.createElement(h.a,{path:"/AddressViewer",exact:!0,component:x}),r.a.createElement(h.a,{path:"/VBN",exact:!0,component:L}))))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(_,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[222,1,2]]]);
//# sourceMappingURL=main.f67b2f04.chunk.js.map