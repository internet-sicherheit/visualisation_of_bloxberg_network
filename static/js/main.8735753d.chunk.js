(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{11:function(e,t,n){},12:function(e,t,n){e.exports=n(20)},17:function(e,t,n){},18:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),a=n(9),s=n.n(a),l=(n(17),n(3)),c=n(4),i=n(6),u=n(5),d=(n(18),n(11),n(1)),p=n(8),g=n(2),f=n.n(g),m=n(7),h=function(e){Object(i.a)(n,e);var t=Object(u.a)(n);function n(e){return Object(l.a)(this,n),t.call(this,e)}return Object(c.a)(n,[{key:"getData",value:function(){var e=Object(m.a)(f.a.mark((function e(t,n,o){var r,a,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getContractList(t,n);case 2:return r=e.sent,console.log("Get contractlist:"),console.log(r),e.next=7,this.getTransactionFromContractList(r);case 7:return a=e.sent,console.log("Get transactionlist from contractlist:"),console.log(a),e.next=12,this.getTransactionsFromAccount(a,o);case 12:return s=e.sent,console.log(">> RESULT <<"),console.log(s),e.abrupt("return",s);case 16:case"end":return e.stop()}}),e,this)})));return function(t,n,o){return e.apply(this,arguments)}}()},{key:"getContractList",value:function(){var e=Object(m.a)(f.a.mark((function e(t,n){var o,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o="https://blockexplorer.bloxberg.org/api/api?module=contract&action=listcontracts&page="+t+"&offset="+n,e.next=3,fetch(o).then((function(e){return e.json()}));case 3:return r=e.sent,e.abrupt("return",r.result);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getTransactionList",value:function(){var e=Object(m.a)(f.a.mark((function e(t){var n,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://blockexplorer.bloxberg.org/api/api?module=account&action=txlist&address="+t,e.next=3,fetch(n).then((function(e){return e.json()}));case 3:return o=e.sent,console.log("getTransactionList: "+o),e.abrupt("return",null);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTransactionFromContractList",value:function(){var e=Object(m.a)(f.a.mark((function e(t){var n,o,r,a,s,l,c,i,u,d,g,m,h;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],o=0,r=Object(p.a)(t),e.prev=3,r.s();case 5:if((a=r.n()).done){e.next=22;break}return s=a.value,l="https://blockexplorer.bloxberg.org/api/api?module=account&action=txlist&address=",l+=s.Address,e.next=11,fetch(l).then((function(e){return e.json()}));case 11:for(c=e.sent,i=Object.keys(c.result).length,u=c.result,d=0;d<i;d++){for(0===n.length&&n.push({source:u[d].from,target:u[d].to,type:"Contract"}),g=0,m=0;m<n.length;m++)n[m].source===u[d].from&&n[m].target===u[d].to&&(g=1);0===g&&""!==u[d].to&&n.push({source:u[d].from,target:u[d].to,type:"Contract"})}o++,console.log(n),h=Math.round(100*o/t.length*100)/100,document.getElementById("progress").innerHTML=h+"%",document.getElementById("progress").style.width=h+"%";case 20:e.next=5;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(3),r.e(e.t0);case 27:return e.prev=27,r.f(),e.finish(27);case 30:return e.abrupt("return",n);case 31:case"end":return e.stop()}}),e,null,[[3,24,27,30]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getTransactionsFromAccount",value:function(){var e=Object(m.a)(f.a.mark((function e(t,n){var o,r,a,s,l,c,i,u,d,g,m,h,b,v,y,E,k,x,w,j;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("original tx list"),console.log(t),o=[],r=Object(p.a)(t);try{for(r.s();!(a=r.n()).done;)s=a.value,o.push({source:s.target,target:s.source})}catch(f){r.e(f)}finally{r.f()}console.log("Converted tx list"),console.log(o),t=o,console.log("Starting with DEPTH --\x3e  "+n),c=[],l=(l=[]).concat(t),i=1;case 13:if(!(i<=n)){e.next=51;break}console.log("DEPTH --\x3e  "+i),u=[],d=Object(p.a)(t),e.prev=17,d.s();case 19:if((g=d.n()).done){e.next=35;break}return m=g.value,h="https://blockexplorer.bloxberg.org/api/api?module=account&action=txlist&address=",h+=m.target,console.log(m.target),e.next=26,fetch(h).then((function(e){return e.json()}));case 26:for(b=e.sent,v=Object.keys(b.result).length,y=b.result,E=0;E<v;E++){for(0===u.length&&u.push({source:y[E].from,target:y[E].to,type:"Contract"}),k=0,x=0;x<u.length;x++)u[x].source===y[E].from&&u[x].target===y[E].to&&(k=1);0===k&&""!==y[E].to&&(y[E].from!==m.target||u.push({source:y[E].from,target:y[E].to,type:"Contract"}))}for(w=0;w<u.length;w++)c.push({source:u[w].source,target:u[w].target});console.log("TEMP-TX-LIST"),console.log(c);case 33:e.next=19;break;case 35:e.next=40;break;case 37:e.prev=37,e.t0=e.catch(17),d.e(e.t0);case 40:return e.prev=40,d.f(),e.finish(40);case 43:for(j=0;j<c.length;j++)l.push({source:c[j].source,target:c[j].target});console.log("RESULT-LIST"),console.log(l),t=c,c=[];case 48:i++,e.next=13;break;case 51:return e.abrupt("return",0==n?t:l);case 52:case"end":return e.stop()}}),e,null,[[17,37,40,43]])})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(r.a.Component),b=function(e){Object(i.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(l.a)(this,n),(o=t.call(this,e)).responseObject=null,o.zoomEnable=!0,console.log("Consturctor."),console.log(e),o.responseObject=new h,o}return Object(c.a)(n,[{key:"createGraph",value:function(e){console.log("create graph:");var t=window.innerHeight-document.getElementById("address_information").offsetHeight;document.getElementById("graph_box").style.height=t+"px";var n=t,o=window.innerWidth,r=e;console.log("links"),console.log(r);var a={};r.forEach((function(e){e.source=a[e.source]||(a[e.source]={source:e.source}),e.target=a[e.target]||(a[e.target]={target:e.target,type:e.type})})),console.log(a);var s=document.getElementById("address_information").offsetWidth-2,l=n-20,c=d.behavior.zoom().on("zoom",(function(){i.attr("transform","translate("+d.event.translate+") scale("+d.event.scale+")")}));document.getElementById("container").innerHTML="";var i=d.select("#container").append("svg").attr("width",s).attr("height",l).style("cursor","move").call(c).append("g"),u=d.layout.force().size([s,l]).nodes(d.values(a)).links(r).on("tick",(function(e){g.attr("cx",(function(e){return e.x})).attr("cy",(function(e){return e.y})).call(u.drag),p.attr("x1",(function(e){return e.source.x})).attr("y1",(function(e){return e.source.y})).attr("x2",(function(e){return e.target.x})).attr("y2",(function(e){return e.target.y}))})).linkDistance(300).charge((function(e){var t=-200;return 0===e.index&&(t*=2.5),t})).start(),p=i.selectAll(".link").data(r).enter().append("line").attr("class","link"),g=i.selectAll(".node").data(u.nodes()).enter().append("circle").style("cursor","auto").style("fill",(function(e){if("Contract"===e.type)return"orange"})).attr("class","node").attr("r",.005*o).on("click",(function(e){"undefined"===typeof e.source?document.getElementById("address_information").innerHTML=" <p class='labels'>Type:</p><p class='values'>"+e.type+"</p><p class='labels'>Address:</p><p class='values'><a href='https://blockexplorer.bloxberg.org/address/"+e.target+"' target='_blank'>"+e.target+"</a></p>":document.getElementById("address_information").innerHTML=" <p class='labels'>Type:</p><p class='values'>Account</p><p class='labels'>Address:</p><p class='values'><a href='https://blockexplorer.bloxberg.org/address/"+e.source+"' target='_blank'>"+e.source+"</a></p>"})).on("mousedown",(function(){console.log(document.getElementsByTagName("g")[0].getAttribute("transform")),this.zoomEnable=!1,console.log("ZoomEnabled? "+this.zoomEnable),d.select("#container").select("svg").call(d.behavior.zoom().on("zoom",null))})).on("mouseup",(function(){this.zoomEnable=!0,console.log("ZoomEnabled? "+this.zoomEnable),d.select("#container").select("svg").call(c)})).on("focus",(function(){d.select(this).style("border-color","red")}));console.log("graph drawed.")}},{key:"showLoader",value:function(){document.getElementById("address_information").innerHTML="Select a node for node information.",document.getElementById("address_information").style.visibility="hidden",document.getElementById("container").style.visibility="hidden",document.getElementById("loader").style.visibility="visible"}},{key:"hideLoader",value:function(){document.getElementById("address_information").style.visibility="visible",document.getElementById("container").style.visibility="visible",document.getElementById("loader").style.visibility="hidden",document.getElementById("progress").style.width="0%",document.getElementById("progress").innerHTML="0%"}},{key:"scrollAnimation",value:function(){document.getElementById("address_information").scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}},{key:"widthResizeListener",value:function(){window.onresize=function(){document.getElementsByTagName("svg")[0].style.width=document.getElementById("address_information").offsetWidth-2}}},{key:"componentWillMount",value:function(){console.log("Component will mount.")}},{key:"componentDidMount",value:function(){var e=this;console.log("Component did mount."),this.showLoader(),this.responseObject.getData(this.props.page,this.props.offset,this.props.depth).then((function(t){e.hideLoader(),e.createGraph(t),e.scrollAnimation(),e.widthResizeListener()}))}},{key:"componentWillUpdate",value:function(e){var t=this;console.log("Component will update."),this.showLoader(),this.responseObject.getData(e.page,e.offset,e.depth).then((function(e){t.hideLoader(),t.createGraph(e),t.scrollAnimation(),t.widthResizeListener()}))}},{key:"componentDidUpdate",value:function(){console.log("Component did update.")}},{key:"render",value:function(){return r.a.createElement("div",{id:"container"})}}]),n}(r.a.Component),v=function(e){Object(i.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(l.a)(this,n);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={page:0,offset:0,depth:0},e}return Object(c.a)(n,[{key:"render",value:function(){for(var e=this,t=0!==this.state.page?r.a.createElement(b,{page:this.state.page,offset:this.state.offset,depth:this.state.depth}):null,n=[],o=1;o<=100;o++)n.push(r.a.createElement("option",{key:o,value:o},o));for(var a=[],s=1;s<=1800;s++)a.push(r.a.createElement("option",{key:s,value:s},s));for(var l=[],c=0;c<=5;c++)l.push(r.a.createElement("option",{key:c,value:c},c));return r.a.createElement("div",{className:"App"},r.a.createElement("div",{id:"banner"},r.a.createElement("h1",{className:"title"},"Visualisation of Bloxsberg-Network")),r.a.createElement("div",{id:"site_informaiton"},r.a.createElement("p",null,"This website will produce a force directed d3 graph that will visualizise the Bloxberg Network by using the ",r.a.createElement("a",{href:"https://blockexplorer.bloxberg.org/api_docs"},"Bloxberg RPC API"),".")),r.a.createElement("div",{id:"values_informaiton"},r.a.createElement("p",{id:"text"},r.a.createElement("b",null,"Page")," represents the page number to be used for pagination."),r.a.createElement("p",{id:"text"},r.a.createElement("b",null,"Offset")," represents the maximum number of records to return when paginating."),r.a.createElement("p",{id:"text"},r.a.createElement("b",null,"Depth")," represents how deep the http requests will search into to network.")),r.a.createElement("div",{id:"control"},r.a.createElement("label",null,"Page:"),r.a.createElement("select",{id:"page_selection",defaultValue:2},n),r.a.createElement("label",null,"Offset:"),r.a.createElement("select",{id:"offset_selection",defaultValue:1},a),r.a.createElement("label",null,"Depth:"),r.a.createElement("select",{id:"depth_selection",defaultValue:0},l),r.a.createElement("input",{type:"submit",id:"button",value:"Create Graph",onClick:function(){var t=document.getElementById("page_selection").value,n=document.getElementById("offset_selection").value,o=document.getElementById("depth_selection").value;console.log("page -> "+t),console.log("offset -> "+n),console.log("depth -> "+o),e.setState({page:t,offset:n,depth:o})}})),r.a.createElement("div",{id:"loader",style:{visibility:"visable"}},r.a.createElement("div",{id:"progressbar"},r.a.createElement("div",{id:"progress"}),r.a.createElement("p",null,"Loading..."))),r.a.createElement("div",{id:"address_information"},r.a.createElement("p",{class:"labels"},"Select a node for node information.")),r.a.createElement("div",{id:"graph_box"},t))}}]),n}(o.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(v,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[12,1,2]]]);
//# sourceMappingURL=main.8735753d.chunk.js.map